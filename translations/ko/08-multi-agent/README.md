```markdown
# 다중 에이전트 설계 패턴

여러 에이전트를 포함하는 프로젝트를 시작하면, 다중 에이전트 설계 패턴을 고려해야 합니다. 하지만 언제 다중 에이전트로 전환해야 하는지와 그 장점이 무엇인지 바로 명확하지 않을 수 있습니다.

## 소개

이번 강의에서는 다음과 같은 질문에 답을 찾아봅니다:

- 다중 에이전트가 적용될 수 있는 시나리오는 무엇인가요?
- 하나의 에이전트가 여러 작업을 수행하는 것보다 다중 에이전트를 사용하는 것이 더 나은 이유는 무엇인가요?
- 다중 에이전트 설계 패턴을 구현하는 데 필요한 구성 요소는 무엇인가요?
- 여러 에이전트가 서로 어떻게 상호작용하는지 확인하려면 어떻게 해야 하나요?

## 학습 목표

이 강의를 마친 후, 여러분은 다음을 할 수 있어야 합니다:

- 다중 에이전트가 적용 가능한 시나리오를 식별할 수 있다.
- 단일 에이전트 대신 다중 에이전트를 사용하는 장점을 이해할 수 있다.
- 다중 에이전트 설계 패턴을 구현하는 데 필요한 구성 요소를 이해할 수 있다.

전체적인 그림은 무엇인가요?

*다중 에이전트는 여러 에이전트가 협력하여 공통 목표를 달성할 수 있도록 하는 설계 패턴입니다.*

이 패턴은 로봇 공학, 자율 시스템, 분산 컴퓨팅 등 다양한 분야에서 널리 사용됩니다.

## 다중 에이전트가 적용되는 시나리오

그렇다면 다중 에이전트를 사용하는 것이 적합한 시나리오는 무엇일까요? 답은 여러 가지가 있지만 특히 다음과 같은 경우에 유용합니다:

- **큰 작업량**: 큰 작업량은 더 작은 작업으로 나누어 여러 에이전트에 할당할 수 있으며, 이를 통해 병렬 처리가 가능하고 작업 완료 속도가 빨라집니다. 예를 들어, 대규모 데이터 처리 작업이 이에 해당합니다.
- **복잡한 작업**: 복잡한 작업 역시 작은 하위 작업으로 나누어 각 작업을 특정 부분에 전문화된 에이전트에게 할당할 수 있습니다. 자율 주행 차량의 경우, 내비게이션, 장애물 감지, 다른 차량과의 통신을 각각 다른 에이전트가 처리하는 것이 좋은 예입니다.
- **다양한 전문성**: 각 에이전트가 서로 다른 전문성을 가지면 단일 에이전트보다 작업의 다양한 측면을 더 효과적으로 처리할 수 있습니다. 예를 들어, 의료 분야에서는 진단, 치료 계획, 환자 모니터링을 각각 다른 에이전트가 처리할 수 있습니다.

## 단일 에이전트보다 다중 에이전트를 사용하는 장점

단일 에이전트 시스템은 간단한 작업에는 적합할 수 있지만, 더 복잡한 작업에서는 다중 에이전트를 사용하는 것이 여러 가지 장점을 제공합니다:

- **전문화**: 각 에이전트가 특정 작업에 특화될 수 있습니다. 단일 에이전트는 모든 작업을 처리할 수 있지만, 복잡한 작업에서는 무엇을 해야 할지 혼란스러워질 수 있습니다. 예를 들어, 적합하지 않은 작업을 수행할 가능성이 있습니다.
- **확장성**: 시스템을 확장할 때 단일 에이전트를 과부하시키는 대신 더 많은 에이전트를 추가하는 것이 더 쉽습니다.
- **장애 허용성**: 한 에이전트가 실패하더라도 다른 에이전트가 계속 작동하여 시스템의 신뢰성을 보장합니다.

예를 들어, 사용자의 여행 예약을 생각해 봅시다. 단일 에이전트 시스템은 항공편 검색, 호텔 예약, 렌터카 예약 등 모든 과정을 처리해야 합니다. 이를 위해 단일 에이전트는 모든 작업을 처리할 도구를 갖춰야 하며, 이는 유지보수와 확장이 어려운 복잡하고 단일 구조의 시스템을 초래할 수 있습니다. 반면, 다중 에이전트 시스템에서는 항공편 검색, 호텔 예약, 렌터카 예약을 각각 전문화된 에이전트가 처리할 수 있습니다. 이는 시스템을 더 모듈화하고 유지보수와 확장을 용이하게 만듭니다.

이를 소규모 개인 여행사와 프랜차이즈 여행사를 비교하는 것으로 비유할 수 있습니다. 소규모 여행사는 단일 에이전트가 모든 과정을 처리하는 반면, 프랜차이즈 여행사는 각 과정마다 다른 에이전트를 배치합니다.

## 다중 에이전트 설계 패턴 구현을 위한 구성 요소

다중 에이전트 설계 패턴을 구현하기 전에, 패턴을 구성하는 기본 요소를 이해해야 합니다.

사용자의 여행 예약 예시를 다시 살펴보겠습니다. 이 경우, 구성 요소는 다음을 포함합니다:

- **에이전트 간 통신**: 항공편 검색, 호텔 예약, 렌터카 예약 에이전트는 사용자의 선호도와 제약 조건에 대한 정보를 공유하고 소통해야 합니다. 이를 위한 통신 프로토콜과 방법을 결정해야 합니다. 예를 들어, 항공편 검색 에이전트는 호텔 예약 에이전트와 소통하여 항공편 날짜와 호텔 예약 날짜가 일치하도록 해야 합니다. 즉, *어떤 에이전트가 정보를 공유하고 어떻게 공유할 것인지*를 결정해야 합니다.
- **조정 메커니즘**: 에이전트는 사용자의 선호도와 제약 조건을 충족하기 위해 행동을 조정해야 합니다. 예를 들어, 사용자가 공항 근처 호텔을 선호한다고 하면서도 렌터카는 공항에서만 이용 가능하다고 한다면, 호텔 예약 에이전트는 렌터카 예약 에이전트와 조율해야 합니다. *에이전트들이 어떻게 행동을 조율할지*를 결정해야 합니다.
- **에이전트 아키텍처**: 에이전트는 사용자와의 상호작용을 통해 의사결정을 내리고 학습할 수 있는 내부 구조를 가져야 합니다. 예를 들어, 항공편 검색 에이전트는 사용자에게 추천할 항공편을 결정할 수 있는 내부 구조를 가져야 합니다. *에이전트가 의사결정을 내리고 학습하는 방법*을 결정해야 합니다. 예를 들어, 항공편 검색 에이전트는 사용자의 과거 선호도를 기반으로 항공편을 추천하는 머신러닝 모델을 사용할 수 있습니다.
- **다중 에이전트 상호작용 가시성**: 여러 에이전트가 서로 어떻게 상호작용하는지 확인할 수 있어야 합니다. 이를 위해 에이전트 활동과 상호작용을 추적할 수 있는 도구와 기술이 필요합니다. 예를 들어, 로깅 및 모니터링 도구, 시각화 도구, 성능 지표 등이 이에 해당합니다.
- **다중 에이전트 패턴**: 다중 에이전트 시스템을 구현하기 위한 다양한 패턴이 있습니다. 예를 들어, 중앙 집중식, 분산형, 하이브리드 아키텍처 등이 있습니다. 여러분의 사용 사례에 가장 적합한 패턴을 결정해야 합니다.
- **사용자 개입**: 대부분의 경우, 시스템에는 사용자가 개입해야 할 때가 있습니다. 에이전트가 언제 사용자 개입을 요청해야 하는지 결정해야 합니다. 예를 들어, 사용자가 에이전트가 추천하지 않은 특정 호텔이나 항공편을 요청하거나 예약 전에 확인을 요청할 수 있습니다.

## 다중 에이전트 상호작용 가시성

여러 에이전트가 서로 어떻게 상호작용하는지 확인하는 것은 매우 중요합니다. 이 가시성은 디버깅, 최적화, 시스템의 전반적인 효율성을 보장하는 데 필수적입니다. 이를 위해 에이전트 활동과 상호작용을 추적할 수 있는 도구와 기술이 필요합니다. 예를 들어, 로깅 및 모니터링 도구, 시각화 도구, 성능 지표 등이 이에 해당합니다.

사용자 여행 예약 예시에서, 각 에이전트의 상태, 사용자의 선호도와 제약 조건, 에이전트 간 상호작용을 보여주는 대시보드를 생각해볼 수 있습니다. 이 대시보드는 사용자의 여행 날짜, 항공편 추천, 호텔 추천, 렌터카 추천 등을 표시하여 에이전트가 서로 어떻게 상호작용하고 있는지, 사용자의 선호도와 제약 조건이 충족되고 있는지를 명확히 보여줍니다.

이제 각각의 세부 요소를 더 자세히 살펴보겠습니다.

- **로깅 및 모니터링 도구**: 각 에이전트가 수행한 작업에 대한 로깅을 진행해야 합니다. 로그 항목에는 작업을 수행한 에이전트, 수행된 작업, 작업이 수행된 시간, 작업 결과 등의 정보가 포함될 수 있습니다. 이 정보는 디버깅, 최적화 등에 활용될 수 있습니다.
- **시각화 도구**: 시각화 도구는 에이전트 간 상호작용을 더 직관적으로 볼 수 있도록 도와줍니다. 예를 들어, 에이전트 간 정보 흐름을 보여주는 그래프를 생각해볼 수 있습니다. 이를 통해 병목 현상, 비효율성, 기타 시스템 문제를 식별할 수 있습니다.
- **성능 지표**: 성능 지표는 다중 에이전트 시스템의 효율성을 추적하는 데 유용합니다. 예를 들어, 작업 완료 시간, 단위 시간당 완료된 작업 수, 에이전트가 제공한 추천의 정확성 등을 추적할 수 있습니다. 이를 통해 개선 영역을 식별하고 시스템을 최적화할 수 있습니다.

## 다중 에이전트 패턴

다중 에이전트 앱을 만들기 위해 사용할 수 있는 구체적인 패턴을 살펴봅시다. 다음은 고려할 만한 흥미로운 패턴들입니다:

### 그룹 채팅

이 패턴은 여러 에이전트가 서로 소통할 수 있는 그룹 채팅 애플리케이션을 만들고자 할 때 유용합니다. 이 패턴의 일반적인 사용 사례로는 팀 협업, 고객 지원, 소셜 네트워킹 등이 있습니다.

이 패턴에서는 각 에이전트가 그룹 채팅의 사용자로 표현되며, 메시지는 메시징 프로토콜을 사용하여 에이전트 간에 교환됩니다. 에이전트는 그룹 채팅에 메시지를 보내거나, 그룹 채팅에서 메시지를 받거나, 다른 에이전트의 메시지에 응답할 수 있습니다.

이 패턴은 모든 메시지가 중앙 서버를 통해 라우팅되는 중앙 집중식 아키텍처 또는 메시지가 직접 교환되는 분산형 아키텍처로 구현할 수 있습니다.

![그룹 채팅](../../../translated_images/multi-agent-group-chat.82d537c5c8dc833abbd252033e60874bc9d00df7193888b3377f8426449a0b20.ko.png)

### 업무 이관

이 패턴은 여러 에이전트가 작업을 서로 이관할 수 있는 애플리케이션을 만들고자 할 때 유용합니다.

이 패턴의 일반적인 사용 사례로는 고객 지원, 작업 관리, 워크플로 자동화 등이 있습니다.

이 패턴에서는 각 에이전트가 작업 또는 워크플로의 단계를 나타내며, 에이전트는 사전 정의된 규칙에 따라 작업을 다른 에이전트에게 이관할 수 있습니다.

![업무 이관](../../../translated_images/multi-agent-hand-off.ed4f0a5a58614a8a3e962fc476187e630a3ba309d066e460f017b503d0b84cfc.ko.png)

### 협력적 필터링

이 패턴은 여러 에이전트가 협력하여 사용자에게 추천을 제공할 수 있는 애플리케이션을 만들고자 할 때 유용합니다.

여러 에이전트가 협력하는 이유는 각 에이전트가 서로 다른 전문성을 가지고 있으며, 추천 과정에 다양한 방식으로 기여할 수 있기 때문입니다.

예를 들어, 사용자가 주식 시장에서 어떤 주식을 매수해야 할지 추천받고 싶다고 가정해봅시다.

- **산업 전문가**: 한 에이전트는 특정 산업에 대한 전문가일 수 있습니다.
- **기술적 분석**: 다른 에이전트는 기술적 분석에 전문적일 수 있습니다.
- **기본적 분석**: 또 다른 에이전트는 기본적 분석에 전문적일 수 있습니다. 이러한 에이전트들이 협력함으로써 사용자에게 더 포괄적인 추천을 제공할 수 있습니다.

![추천](../../../translated_images/multi-agent-filtering.719217d169391ddb118bbb726b19d4d89ee139f960f8749ccb2400efb4d0ce79.ko.png)

## 시나리오: 환불 프로세스

고객이 제품 환불을 요청하는 시나리오를 고려해 봅시다. 이 과정에는 여러 에이전트가 관여할 수 있지만, 이를 환불 프로세스에 특화된 에이전트와 다른 프로세스에서도 사용할 수 있는 일반 에이전트로 나눌 수 있습니다.

**환불 프로세스에 특화된 에이전트**:

아래는 환불 프로세스에 관여할 수 있는 에이전트들입니다:

- **고객 에이전트**: 고객을 나타내며 환불 프로세스를 시작하는 역할을 합니다.
- **판매자 에이전트**: 판매자를 나타내며 환불을 처리하는 역할을 합니다.
- **결제 에이전트**: 결제 과정을 나타내며 고객의 결제를 환불하는 역할을 합니다.
- **분쟁 해결 에이전트**: 분쟁 해결 과정을 나타내며 환불 과정에서 발생하는 문제를 해결하는 역할을 합니다.
- **준수 에이전트**: 규정 준수를 나타내며 환불 과정이 규정과 정책을 준수하도록 보장하는 역할을 합니다.

**일반 에이전트**:

이 에이전트들은 비즈니스의 다른 부분에서도 사용할 수 있습니다.

- **배송 에이전트**: 배송 과정을 나타내며 제품을 판매자에게 다시 배송하는 역할을 합니다. 이 에이전트는 환불 과정뿐만 아니라 일반적인 제품 구매 배송에도 사용할 수 있습니다.
- **피드백 에이전트**: 피드백 과정을 나타내며 고객으로부터 피드백을 수집하는 역할을 합니다. 피드백은 환불 과정뿐만 아니라 언제든지 수집할 수 있습니다.
- **에스컬레이션 에이전트**: 에스컬레이션 과정을 나타내며 문제를 상위 지원 단계로 전달하는 역할을 합니다. 이 에이전트는 문제를 에스컬레이션해야 하는 모든 프로세스에 사용할 수 있습니다.
- **알림 에이전트**: 알림 과정을 나타내며 환불 과정의 다양한 단계에서 고객에게 알림을 보내는 역할을 합니다.
- **분석 에이전트**: 분석 과정을 나타내며 환불 과정과 관련된 데이터를 분석하는 역할을 합니다.
- **감사 에이전트**: 감사 과정을 나타내며 환불 과정이 올바르게 수행되고 있는지 확인하는 역할을 합니다.
- **보고 에이전트**: 보고 과정을 나타내며 환불 과정에 대한 보고서를 생성하는 역할을 합니다.
- **지식 에이전트**: 지식 과정을 나타내며 환불 과정과 관련된 정보를 유지 관리하는 역할을 합니다. 이 에이전트는 환불뿐만 아니라 비즈니스의 다른 부분에서도 지식을 제공할 수 있습니다.
- **보안 에이전트**: 보안 과정을 나타내며 환불 과정의 보안을 보장하는 역할을 합니다.
- **품질 에이전트**: 품질 과정을 나타내며 환불 과정의 품질을 보장하는 역할을 합니다.

위에서 나열된 에이전트들은 환불 프로세스에 특화된 에이전트와 비즈니스의 다른 부분에서도 사용할 수 있는 일반 에이전트를 포함합니다. 이를 통해 다중 에이전트 시스템에서 사용할 에이전트를 어떻게 결정할 수 있을지 아이디어를 얻을 수 있습니다.

## 과제

이 강의에 적합한 과제는 무엇일까요?

고객 지원 프로세스를 위한 다중 에이전트 시스템을 설계하세요. 프로세스에 관여하는 에이전트, 각 에이전트의 역할과 책임, 에이전트 간의 상호작용 방식을 식별하세요. 고객 지원 프로세스에 특화된 에이전트와 비즈니스의 다른 부분에서도 사용할 수 있는 일반 에이전트를 모두 고려하세요.

> 아래 솔루션을 읽기 전에 스스로 생각해 보세요. 필요한 에이전트가 생각보다 많을 수 있습니다.

> TIP: 고객 지원 프로세스의 다양한 단계와 시스템에 필요한 에이전트를 생각해 보세요.

## 솔루션

[솔루션](./solution/solution.md)

## 지식 확인

질문: 언제 다중 에이전트를 고려해야 하나요?

- [] A1: 작업량이 적고 단순한 작업일 때.
- [] A2: 작업량이 많을 때.
- [] A3: 단순한 작업일 때.

[퀴즈 솔루션](./solution/solution-quiz.md)

## 요약

이번 강의에서는 다중 에이전트 설계 패턴에 대해 살펴보았습니다. 다중 에이전트가 적용될 수 있는 시나리오, 단일 에이전트보다 다중 에이전트를 사용하는 장점, 다중 에이전트 설계 패턴을 구현하는 데 필요한 구성 요소, 여러 에이전트가 서로 상호작용하는 방식을 확인하는 방법 등을 다루었습니다.

## 추가 자료

- [Autogen design patterns](https://microsoft.github.io/autogen/0.4.0.dev4/user-guide/core-user-guide/design-patterns/index.html)
- [Agentic design patterns](https://www.analyticsvidhya.com/blog/2024/10/agentic-design-patterns/)
```

**면책 조항**:  
이 문서는 기계 기반 AI 번역 서비스를 사용하여 번역되었습니다. 정확성을 위해 최선을 다하고 있지만, 자동 번역에는 오류나 부정확성이 포함될 수 있음을 유의하시기 바랍니다. 원어로 작성된 원본 문서를 권위 있는 자료로 간주해야 합니다. 중요한 정보에 대해서는 전문 번역가의 번역을 권장합니다. 이 번역 사용으로 인해 발생하는 오해나 잘못된 해석에 대해 당사는 책임을 지지 않습니다.